apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: cfb-staging

bases:
- ../../

# Staging-specific values overrides
helmCharts:
- name: cfb
  repo: ""
  releaseName: cfb
  namespace: cfb-staging
  valuesInline:
    replicaCount: 2
    image:
      tag: staging-latest
    env:
      HTTP_PORT: 8080
      CFBD_API_BASE: https://api.collegefootballdata.com
      REDIS_ADDR: redis-staging:6379

# Patch resources for staging environment
patchesStrategicMerge:
- deployment-patch.yaml

# Generate staging-specific secrets
secretGenerator:
- name: cfb-secrets
  envs:
  - .env.staging
